---
- name: Set a health facts for the expect health facts
  ansible.builtin.set_fact:
      "interfaces_health":
        "admin_down": 0
        "admin_up": 4
        "down": 0
        "total": 4
        "up": 4
      }

- name: Vars
  ansible.builtin.set_fact:
    item:
      name: "health_check"
      vars:
        checks:
          - name: all_operational_state_up
          - name: all_operational_state_down
          - name: min_operational_state_up
              min_count: 1
          - name: all_administratnal_state_up
          - name: all_administratnal_state_down
          - name: min_administratnal_state_up
              min_count: 1

- name: Set INTERFACES health facts
  ansible.builtin.set_fact:
    health_checks: "{{ interfaces_health | ansible.utils.health_check_view(item) }}"


- name: Check for accurate facts
  ansible.builtin.assert:
    that: "{{ health_checks == expected_health_checks }}"
